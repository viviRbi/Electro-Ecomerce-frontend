(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{124:function(e,t,a){e.exports=a(250)},129:function(e,t,a){},153:function(e,t){},155:function(e,t){},193:function(e,t){},194:function(e,t){},250:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(29),r=a.n(c),l=(a(129),a(20)),s=a(11),u=a(24),m=a(47),i=a.n(m),p=function(e,t){var a,n;console.log("AUTHENTICATE HELPER RESPONSE OBJ",e),a="token",n=e.data.token,"undefined"!==window&&i.a.set(a,n,{expires:1}),function(e,t){void 0!==window&&localStorage.setItem(e,JSON.stringify(t))}("user",e.data.user),t()},d=function(){if("undefined"!==window&&function(e){if(void 0!==window)return i.a.get(e)}("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},b=function(e){var t;t="token","undefined"!==window&&i.a.remove(t,{expires:1}),function(e){void 0!==window&&localStorage.removeItem(e)}("user"),e()},f=Object(u.g)((function(e){var t=e.history,a=function(e){return t.location.pathname===e?{color:"black"}:{color:"blue"}},n=function(){if(d())return"admin"===d().role?"/admin":"/private"};return o.a.createElement("ul",{className:"nav nav-tabs"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(s.b,{to:"/",style:a("/")},"Home")),d()?o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{className:"nav-item"},o.a.createElement(s.b,{style:a("/no"),onClick:function(){b((function(){t.push("/")}))}}," Sign out")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(s.b,Object(l.a)({to:"".concat(n),style:{cursor:"pointer"}},"style",a("".concat(n))),d().name))):o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{className:"nav-item"},o.a.createElement(s.b,{to:"/signin",style:a("/signin")},"Sign in")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(s.b,{to:"/signup",style:a("/signup")},"Sign up"))))})),E=function(e){var t=e.children;return o.a.createElement("div",null,o.a.createElement(f,null),o.a.createElement("div",{className:"container"},t))},h=function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Home"))},g=a(5),v=a(22),O=a(21),w=a.n(O),x=a(8),N=(a(30),function(){var e=Object(n.useState)({name:"",email:"",password:"",buttonText:"Submit"}),t=Object(v.a)(e,2),a=t[0],c=t[1],r=a.name,s=a.email,m=a.password,i=a.buttonText,p=function(e){return function(t){c(Object(g.a)({},a,Object(l.a)({},e,t.target.value)))}};return o.a.createElement("div",null,o.a.createElement(x.a,null),d()?o.a.createElement(u.a,{to:"/"}):null,o.a.createElement("h1",null,"Sign up"),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Name"),o.a.createElement("input",{autoComplete:"true",onChange:p("name"),type:"text",className:"form-control"}),o.a.createElement("label",{className:"text-muted"},"Email"),o.a.createElement("input",{autoComplete:"true",onChange:p("email"),type:"text",className:"form-control"}),o.a.createElement("label",{className:"text-muted"},"Password"),o.a.createElement("input",{autoComplete:"true",onChange:p("password"),type:"password",className:"form-control"}),o.a.createElement("button",{type:"submit",className:"btn",onClick:function(e){return function(e){e.preventDefault(),c(Object(g.a)({},a,{buttonText:"Submitting"})),w()({method:"POST",url:"".concat("http://localhost:8000/api","/signup"),data:{name:r,email:s,password:m}}).then((function(e){console.log("sign up sucess"),c(Object(g.a)({},a,{name:"",email:"",password:"",buttonText:"Submited"})),x.b.success(e.data.message)})).catch((function(e){console.log("SIGNUP ERROR",e.response.data.error),c(Object(g.a)({},a,{buttonText:"Submit"})),x.b.error(e.response.data.error)}))}(e)}},i))))}),j=function(e){var t=e.history,a=Object(n.useState)({email:"",password:"",buttonText:"Submit"}),c=Object(v.a)(a,2),r=c[0],s=c[1],m=r.email,i=r.password,b=r.buttonText,f=function(e){return function(t){s(Object(g.a)({},r,Object(l.a)({},e,t.target.value)))}};return o.a.createElement("div",null,o.a.createElement(x.a,null),d()?o.a.createElement(u.a,{to:"/"}):null,o.a.createElement("h1",null,"Sign in"),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Email"),o.a.createElement("input",{autoComplete:"true",onChange:f("email"),type:"text",className:"form-control"}),o.a.createElement("label",{className:"text-muted"},"Password"),o.a.createElement("input",{autoComplete:"true",onChange:f("password"),type:"password",className:"form-control"}),o.a.createElement("button",{type:"submit",className:"btn",onClick:function(e){return function(e){e.preventDefault(),s(Object(g.a)({},r,{buttonText:"Submitting"})),w()({method:"POST",url:"".concat("http://localhost:8000/api","/signin"),data:{email:m,password:i}}).then((function(e){console.log("sign in sucess"),p(e,(function(){s(Object(g.a)({},r,{email:"",password:"",buttonText:"Submited"})),d()&&"admin"===d().role?t.push("/admin"):t.push("/private")}))})).catch((function(e){s(Object(g.a)({},r,{buttonText:"Submit"}))}))}(e)}},b))))},T=a(45),S=a.n(T),k=function(e){var t=e.match,a=Object(n.useState)({name:"",token:"",show:!0}),c=Object(v.a)(a,2),r=c[0],l=c[1];Object(n.useEffect)((function(){var e=t.params.token,a=S.a.decode(e).name;e&&l(Object(g.a)({},r,{name:a,token:e}))}),[t.params.token,r]);var s=r.name,u=r.token,m=r.show,i=function(e){e.preventDefault(),w()({method:"POST",url:"".concat("http://localhost:8000/api","/account-activation"),data:{token:u}}).then((function(e){console.log("ACCOUNT ACTIVATION",e),l(Object(g.a)({},r,{show:!1})),x.b.success("Hey ".concat(e.data.message))})).catch((function(e){console.log("ACCOUNT ACTIVATION ERROR",e.response.data),x.b.error(e.response.data.error)}))};return o.a.createElement("div",null,o.a.createElement(x.a,null),m&&o.a.createElement("div",{className:"text-center"},o.a.createElement("h1",null," Hey ",s,", ready to activate your account?"),o.a.createElement("button",{onClick:i},"Activate Account")))},y=function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Private page/ Today's Deals"))},C=a(46),R=function(e){var t=e.component,a=Object(C.a)(e,["component"]);return o.a.createElement(u.b,Object.assign({},a,{render:function(e){return d()?o.a.createElement(t,e):o.a.createElement(u.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},P=function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Admin page"))},A=function(e){var t=e.component,a=Object(C.a)(e,["component"]);return o.a.createElement(u.b,Object.assign({},a,{render:function(e){return d()&&"admin"===d().role?o.a.createElement(t,e):o.a.createElement(u.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},I=function(){var e=Object(n.useState)({email:"",buttonText:"Request"}),t=Object(v.a)(e,2),a=t[0],c=t[1],r=a.email,s=a.buttonText;return o.a.createElement("div",null,o.a.createElement(x.a,null),function(){return o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Email"),o.a.createElement("input",{autoComplete:"true",onChange:(e="email",function(t){c(Object(g.a)({},a,Object(l.a)({},e,t.target.value)))}),type:"text",className:"form-control"}),o.a.createElement("button",{type:"submit",className:"btn",onClick:function(e){return function(e){e.preventDefault(),c(Object(g.a)({},a,{buttonText:"Submitting"})),w()({method:"PUT",url:"".concat("http://localhost:8000/api","/forgot-password"),data:{email:r}}).then((function(e){console.log("forgot pass sucess"),x.b.success(e.data.message),c(Object(g.a)({},a,{buttonText:"Requested"}))})).catch((function(e){console.log("forgot pass ERROR",e.response.data.error),c(Object(g.a)({},a,{buttonText:"Request"})),x.b.error(e.response.data.error)}))}(e)}},s)));var e}())},D=function(e){var t=e.match,a=Object(n.useState)({name:"",token:"",newPassword:"",buttonText:"Request"}),c=Object(v.a)(a,2),r=c[0],l=c[1];Object(n.useEffect)((function(){var e=t.params.token,a=S.a.decode(e).name;e&&l(Object(g.a)({},r,{name:a,token:e}))}),[t.params.token]);var s=r.name,u=r.token,m=r.newPassword,i=r.buttonText;return o.a.createElement("div",null,o.a.createElement(x.a,null),o.a.createElement("h1",null,"Reset password"),JSON.stringify({name:s,token:u}),o.a.createElement("form",null,o.a.createElement("h1",null,s),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Password"),o.a.createElement("input",{autoComplete:"true",onChange:function(e){return function(e){l(Object(g.a)({},r,{newPassword:e.target.value}))}(e)},type:"password",className:"form-control"}),o.a.createElement("button",{type:"submit",className:"btn",onClick:function(e){return function(e){e.preventDefault(),l(Object(g.a)({},r,{buttonText:"Reset"})),w()({method:"PUT",url:"".concat("http://localhost:8000/api","/reset-password"),data:{newPassword:m,resetPasswordLink:u}}).then((function(e){console.log("reset pass success"),x.b.success(e.data.message),l(Object(g.a)({},r,{buttonText:"Done"}))})).catch((function(e){console.log("reset pass ERROR",e.response.data.error),l(Object(g.a)({},r,{buttonText:"Reset"})),x.b.error(e.response.data.error)}))}(e)}},i))))};var H=function(){return o.a.createElement(E,null,o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/",component:h}),o.a.createElement(u.b,{exact:!0,path:"/signup",component:N}),o.a.createElement(u.b,{exact:!0,path:"/signin",component:j}),o.a.createElement(u.b,{exact:!0,path:"/auth/activate/:token",component:k}),o.a.createElement(R,{exact:!0,path:"/private",component:y}),o.a.createElement(A,{exact:!0,path:"/admin",component:P}),o.a.createElement(u.b,{exact:!0,path:"/auth/password/forgot",component:I}),o.a.createElement(u.b,{exact:!0,path:"/auth/password/reset/:token",component:D})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(s.a,null,o.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[124,1,2]]]);
//# sourceMappingURL=main.16340650.chunk.js.map